<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø§Ø³Ø¨Ø© Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ù…Ø²Ø§Ø¬ - Ø§ÙƒØªØ´Ù Ù…Ø²Ø§Ø¬Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ</title>
    <meta name="description" content="Ø§ÙƒØªØ´Ù Ù…Ø²Ø§Ø¬Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù…Ù† Ø®Ù„Ø§Ù„ Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ø§Ù„Ù…Ù…ØªØ¹Ø©! ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø­Ø§Ù„ØªÙƒ Ø§Ù„Ù…Ø²Ø§Ø¬ÙŠØ©">
    <meta name="keywords" content="Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù…Ø²Ø§Ø¬, Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ù…Ø²Ø§Ø¬, Ø­Ø§Ø³Ø¨Ø© Ù…Ø¶Ø­ÙƒØ©, ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø²Ø§Ø¬">
    <meta name="author" content="Ø§Ù„Ø¢Ù„Ø§Øª Ø§Ù„Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø©">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../css/calculator.css">
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/no-theme-toggle.css">
    <style>
        .mood-transition {
            transition: all 0.3s ease-in-out;
        }
        .answer-button {
            transition: transform 0.2s;
            margin: 10px;
            width: 80%;
        }
        .answer-button:hover {
            transform: scale(1.05);
        }
        .mood-emoji {
            font-size: 4rem;
            margin: 20px;
            animation: bounce 1s infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .mood-trend {
            padding: 15px;
            margin-top: 20px;
            border-radius: 10px;
            background: #f8f9fa;
        }
        .badge {
            margin: 5px;
            padding: 8px 15px;
            font-size: 0.9rem;
        }
    </style>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EG5T75NQHF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-EG5T75NQHF');
    </script>
</head>
<body>
    <header class="bg-white shadow-sm">
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <a class="navbar-brand site-logo" href="../../index.html">Ø§Ù„Ø¢Ù„Ø§Øª Ø§Ù„Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø©</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="../../index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="../fun.html">Ø§Ù„Ø­Ø§Ø³Ø¨Ø§Øª Ø§Ù„Ù…Ø¶Ø­ÙƒØ©</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <div class="calculator-container">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <h1 class="category-title text-center">Ø­Ø§Ø³Ø¨Ø© Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ù…Ø²Ø§Ø¬ ğŸ˜Š</h1>
                        
                        <div class="card calculator-card">
                            <div class="card-body">
                                <div id="startScreen" class="text-center p-4 mb-4">
                                    <h2 class="mb-4">Ø§ÙƒØªØ´Ù Ù…Ø²Ø§Ø¬Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ!</h2>
                                    <p class="lead mb-4">Ø£Ø¬Ø¨ Ø¹Ù„Ù‰ Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¨Ø³ÙŠØ·Ø© Ù„Ù†ÙƒØªØ´Ù Ù…Ø¹Ø§Ù‹ Ø­Ø§Ù„ØªÙƒ Ø§Ù„Ù…Ø²Ø§Ø¬ÙŠØ© ğŸ¯</p>
                                    <button id="startButton" class="btn btn-primary btn-lg">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†</button>
                                </div>

                                <form id="moodForm" class="calculator-form" style="display: none;">
                                    <div class="progress mb-4">
                                        <div class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <div id="questionContainer" class="text-center">
                                        <!-- Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                                    </div>
                                </form>

                                <div id="result" class="text-center" style="display: none;">
                                    <!-- Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                                </div>

                                <div id="moodHistory" class="mt-4" style="display: none;">
                                    <h3 class="text-center">Ø³Ø¬Ù„ Ù…Ø²Ø§Ø¬Ùƒ Ø§Ù„Ø³Ø§Ø¨Ù‚</h3>
                                    <div id="moodHistoryContainer" class="d-flex flex-wrap justify-content-center gap-2">
                                        <!-- Ø³Ø¬Ù„ Ø§Ù„Ù…Ø²Ø§Ø¬ Ø§Ù„Ø³Ø§Ø¨Ù‚ Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="info-box mt-5">
                            <h4>Ø­Ù‚Ø§Ø¦Ù‚ Ø¹Ù† Ø§Ù„Ù…Ø²Ø§Ø¬</h4>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">Ø§Ù„Ù…Ø²Ø§Ø¬ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠ ÙŠØ¹Ø²Ø² Ø¬Ù‡Ø§Ø² Ø§Ù„Ù…Ù†Ø§Ø¹Ø©! ğŸ˜Š</li>
                                <li class="list-group-item">Ø§Ù„Ø¶Ø­Ùƒ ÙŠØ·Ù„Ù‚ Ù‡Ø±Ù…ÙˆÙ†Ø§Øª Ø§Ù„Ø³Ø¹Ø§Ø¯Ø© ÙÙŠ Ø§Ù„Ø¬Ø³Ù…! ğŸ˜„</li>
                                <li class="list-group-item">Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© ØªØ­Ø³Ù† Ø§Ù„Ù…Ø²Ø§Ø¬ Ø¨Ø´ÙƒÙ„ ÙÙˆØ±ÙŠ! ğŸƒâ€â™‚ï¸</li>
                                <li class="list-group-item">Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù„Ù‡Ø§ ØªØ£Ø«ÙŠØ± Ù‚ÙˆÙŠ Ø¹Ù„Ù‰ ØªØºÙŠÙŠØ± Ù…Ø²Ø§Ø¬Ù†Ø§! ğŸµ</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer bg-light">
        <div class="container">
            <p class="mb-0">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© 2024 Ø§Ù„Ø¢Ù„Ø§Øª Ø§Ù„Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø©</p>
        </div>
    </footer>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JavaScript -->
    <script src="../../js/utils.js"></script>
    <script src="../../js/theme.js"></script>
    <script>
        const questions = [
            {
                question: "ÙƒÙŠÙ ØªØµÙ Ø·Ø§Ù‚ØªÙƒ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù„Ø­Ø¸Ø©ØŸ",
                answers: [
                    { text: "Ù…ØªØ­Ù…Ø³ ÙˆÙ…Ù„ÙŠØ¡ Ø¨Ø§Ù„Ù†Ø´Ø§Ø· âš¡", score: { energy: 10, social: 8, creativity: 5 } },
                    { text: "Ù‡Ø§Ø¯Ø¦ ÙˆÙ…Ø³ØªØ±Ø®ÙŠ ğŸŒ¿", score: { peace: 10, reflection: 7 } },
                    { text: "Ù…ØªØ¹Ø¨ ÙˆØ®Ø§Ù…Ù„ ğŸ˜´", score: { energy: -5, peace: 5 } },
                    { text: "Ù…ØªÙˆØªØ± ÙˆÙ‚Ù„Ù‚ ğŸ˜°", score: { peace: -5, energy: 5 } },
                    { text: "Ù…Ø¹ØªØ¯Ù„ ÙˆÙ…ØªÙˆØ§Ø²Ù† ğŸ˜Š", score: { peace: 7, energy: 7 } }
                ]
            },
            {
                question: "Ù…Ø§ Ù‡Ùˆ Ø£ÙˆÙ„ Ø´ÙŠØ¡ Ø¬Ø°Ø¨ Ø§Ù†ØªØ¨Ø§Ù‡Ùƒ Ø§Ù„ÙŠÙˆÙ…ØŸ",
                answers: [
                    { text: "Ø§Ù„Ø³Ù…Ø§Ø¡ Ø§Ù„Ø²Ø±Ù‚Ø§Ø¡ ğŸŒ¤ï¸", score: { peace: 8, reflection: 7 } },
                    { text: "ÙÙ†Ø¬Ø§Ù† Ø§Ù„Ù‚Ù‡ÙˆØ© â˜•", score: { energy: 6, creativity: 5 } },
                    { text: "ØµÙˆØª Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ ğŸµ", score: { creativity: 8, social: 6 } },
                    { text: "Ø§Ø¨ØªØ³Ø§Ù…Ø© Ø´Ø®Øµ Ù…Ø§ ğŸ˜Š", score: { social: 9, peace: 6 } },
                    { text: "Ø´ÙŠØ¡ Ø¬Ù…ÙŠÙ„ ÙÙŠ Ø§Ù„Ø·Ø¨ÙŠØ¹Ø© ğŸŒ¸", score: { reflection: 9, peace: 7 } }
                ]
            },
            {
                question: "Ù…Ø§ Ù‡Ùˆ Ù†ÙˆØ¹ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø³Ù…Ø§Ø¹Ù‡ Ø§Ù„Ø¢Ù†ØŸ",
                answers: [
                    { text: "Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø­Ù…Ø§Ø³ÙŠØ© ğŸ¸", score: { energy: 9, social: 7 } },
                    { text: "Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù‡Ø§Ø¯Ø¦Ø© ğŸ¹", score: { peace: 9, reflection: 7 } },
                    { text: "Ø£ØºØ§Ù†ÙŠ Ø­Ø²ÙŠÙ†Ø© ğŸ»", score: { reflection: 8, creativity: 6 } },
                    { text: "Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø±Ø§Ù‚ØµØ© ğŸ’ƒ", score: { social: 9, energy: 8 } },
                    { text: "ØµÙ…Øª ØªØ§Ù… ğŸ¤«", score: { peace: 8, reflection: 9 } }
                ]
            },
            {
                question: "Ù…Ø§ Ù‡Ùˆ Ù†Ø´Ø§Ø·Ùƒ Ø§Ù„Ù…ÙØ¶Ù„ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù„Ø­Ø¸Ø©ØŸ",
                answers: [
                    { text: "Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ø¹ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ ğŸ‘¥", score: { social: 10, energy: 8 } },
                    { text: "Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙŠ Ù‡Ø¯ÙˆØ¡ ğŸ“š", score: { peace: 9, reflection: 8 } },
                    { text: "Ù…Ù…Ø§Ø±Ø³Ø© Ø§Ù„Ø±ÙŠØ§Ø¶Ø© ğŸƒâ€â™‚ï¸", score: { energy: 10, creativity: 5 } },
                    { text: "Ù…Ø´Ø§Ù‡Ø¯Ø© ÙÙŠÙ„Ù… ğŸ¬", score: { creativity: 7, peace: 6 } },
                    { text: "Ø§Ù„Ù†ÙˆÙ… ğŸ˜´", score: { peace: 8, reflection: 5 } }
                ]
            },
            {
                question: "ÙƒÙŠÙ ØªØªØ®ÙŠÙ„ Ø¨Ù‚ÙŠØ© ÙŠÙˆÙ…ÙƒØŸ",
                answers: [
                    { text: "Ù…Ù„ÙŠØ¡ Ø¨Ø§Ù„Ù…ØºØ§Ù…Ø±Ø§Øª ğŸ¢", score: { energy: 9, creativity: 8 } },
                    { text: "Ù‡Ø§Ø¯Ø¦ ÙˆÙ…Ø±ÙŠØ­ ğŸ›‹ï¸", score: { peace: 9, reflection: 7 } },
                    { text: "Ù…Ø´ØºÙˆÙ„ ÙˆÙ…Ù†ØªØ¬ ğŸ’¼", score: { energy: 8, creativity: 7 } },
                    { text: "Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ ÙˆÙ…Ø±Ø­ ğŸ‰", score: { social: 10, energy: 7 } },
                    { text: "Ø¹Ø§Ø¯ÙŠ ÙˆØ±ÙˆØªÙŠÙ†ÙŠ ğŸ“…", score: { peace: 6, reflection: 5 } }
                ]
            }
        ];

        let currentQuestion = 0;
        let answers = [];
        let moodHistory = JSON.parse(localStorage.getItem('moodHistory')) || [];

        function updateProgress() {
            const progress = ((currentQuestion) / questions.length) * 100;
            document.querySelector('.progress-bar').style.width = `${progress}%`;
        }

        function showQuestion() {
            const questionCard = document.getElementById('questionContainer');
            const questionText = document.createElement('h3');
            questionText.className = 'mood-transition mb-4';
            questionText.textContent = questions[currentQuestion].question;
            questionCard.innerHTML = '';
            questionCard.appendChild(questionText);
            
            questions[currentQuestion].answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.className = 'btn btn-outline-primary answer-button mood-transition';
                button.textContent = answer.text;
                button.onclick = () => selectAnswer(answer);
                questionCard.appendChild(button);
            });
            
            document.getElementById('moodForm').style.display = 'block';
            updateProgress();
        }

        function selectAnswer(answer) {
            answers.push(answer);
            
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                setTimeout(() => {
                    showQuestion();
                }, 300);
            } else {
                setTimeout(() => {
                    showResult();
                }, 300);
            }
        }

        function analyzeMood() {
            const scores = {
                energy: 0,
                peace: 0,
                creativity: 0,
                reflection: 0,
                social: 0
            };

            // Calculate total scores
            answers.forEach(answer => {
                Object.entries(answer.score).forEach(([trait, value]) => {
                    scores[trait] += value;
                });
            });

            // Find dominant traits
            const maxScore = Math.max(...Object.values(scores));
            const dominantTraits = Object.entries(scores)
                .filter(([trait, score]) => score >= maxScore - 5)
                .map(([trait]) => trait);

            // Map traits to moods
            const moodMap = {
                energy: { mood: "Ù…ØªØ­Ù…Ø³ ÙˆÙ…Ù„ÙŠØ¡ Ø¨Ø§Ù„Ø·Ø§Ù‚Ø©", emoji: "ğŸŒŸ" },
                peace: { mood: "Ù‡Ø§Ø¯Ø¦ ÙˆÙ…ØªÙˆØ§Ø²Ù†", emoji: "ğŸŒ¿" },
                creativity: { mood: "Ù…Ø¨Ø¯Ø¹ ÙˆÙ…Ø¨ØªÙƒØ±", emoji: "ğŸ¨" },
                reflection: { mood: "Ù…ØªØ£Ù…Ù„ ÙˆÙ…ÙÙƒØ±", emoji: "ğŸ¤”" },
                social: { mood: "Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ ÙˆÙ…Ø±Ø­", emoji: "ğŸ‰" }
            };

            // Select primary mood based on highest score
            const primaryTrait = Object.entries(scores)
                .reduce((a, b) => b[1] > a[1] ? b : a)[0];

            const mood = moodMap[primaryTrait];
            return {
                mood: `${mood.mood} ${mood.emoji}`,
                scores: scores,
                recommendations: getRecommendations(primaryTrait, dominantTraits)
            };
        }

        function getRecommendations(primaryTrait, traits) {
            const recommendations = {
                energy: [
                    "Ø§Ø³ØªØºÙ„ Ø·Ø§Ù‚ØªÙƒ ÙÙŠ Ù…Ù…Ø§Ø±Ø³Ø© Ø§Ù„Ø±ÙŠØ§Ø¶Ø©! ğŸƒâ€â™‚ï¸",
                    "Ø§Ø¨Ø¯Ø£ Ù…Ø´Ø±ÙˆØ¹Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹ Ù…Ø«ÙŠØ±Ø§Ù‹! ğŸš€",
                    "Ø´Ø§Ø±Ùƒ ÙÙŠ Ù†Ø´Ø§Ø· Ø¬Ù…Ø§Ø¹ÙŠ Ø­Ù…Ø§Ø³ÙŠ! ğŸ¯"
                ],
                peace: [
                    "Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø¬Ù„Ø³Ø© ØªØ£Ù…Ù„ Ù‡Ø§Ø¯Ø¦Ø© ğŸ§˜â€â™‚ï¸",
                    "Ø§Ù‚Ø±Ø£ ÙƒØªØ§Ø¨Ø§Ù‹ ÙÙŠ Ù…ÙƒØ§Ù† Ù‡Ø§Ø¯Ø¦ ğŸ“š",
                    "ØªÙ†Ø²Ù‡ ÙÙŠ Ø§Ù„Ø·Ø¨ÙŠØ¹Ø© ğŸŒ³"
                ],
                creativity: [
                    "Ø¬Ø±Ø¨ Ø±Ø³Ù… Ø´ÙŠØ¡ Ø¬Ø¯ÙŠØ¯ ğŸ¨",
                    "Ø§ÙƒØªØ¨ Ù‚ØµØ© Ù‚ØµÙŠØ±Ø© âœï¸",
                    "ØªØ¹Ù„Ù… Ù…Ù‡Ø§Ø±Ø© Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© ğŸ¯"
                ],
                reflection: [
                    "Ø¯ÙˆÙ‘Ù† Ø£ÙÙƒØ§Ø±Ùƒ ÙÙŠ Ù…Ø°ÙƒØ±Ø§ØªÙƒ ğŸ“",
                    "ØªØ£Ù…Ù„ ÙÙŠ Ø§Ù„Ø·Ø¨ÙŠØ¹Ø© ğŸŒ…",
                    "Ø®Ø·Ø· Ù„Ø£Ù‡Ø¯Ø§ÙÙƒ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ© ğŸ¯"
                ],
                social: [
                    "Ø§ØªØµÙ„ Ø¨ØµØ¯ÙŠÙ‚ Ù‚Ø¯ÙŠÙ… ğŸ“±",
                    "Ù†Ø¸Ù… Ù„Ù‚Ø§Ø¡Ù‹ ØµØºÙŠØ±Ø§Ù‹ Ù…Ø¹ Ø§Ù„Ø£Ø­Ø¨Ø§Ø¨ ğŸ‘¥",
                    "Ø´Ø§Ø±Ùƒ ÙÙŠ Ù†Ø´Ø§Ø· Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ ğŸ‰"
                ]
            };

            // Get primary recommendations
            const primaryRecs = recommendations[primaryTrait];
            
            // Get one random recommendation for each additional trait
            const additionalRecs = traits
                .filter(trait => trait !== primaryTrait)
                .map(trait => {
                    const traitRecs = recommendations[trait];
                    return traitRecs[Math.floor(Math.random() * traitRecs.length)];
                });

            return [...primaryRecs, ...additionalRecs].join('\n');
        }

        function showResult() {
            const result = analyzeMood();
            document.getElementById('moodForm').style.display = 'none';
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            
            // Create mood visualization
            const moodEmoji = result.mood.split(' ').pop();
            
            resultDiv.innerHTML = `
                <div class="mood-emoji">${moodEmoji}</div>
                <h2 class="mood-transition">Ù…Ø²Ø§Ø¬Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ: ${result.mood}</h2>
                <div class="mood-trend">
                    <h4>ØªØ­Ù„ÙŠÙ„ Ù…Ø²Ø§Ø¬Ùƒ:</h4>
                    <div class="progress mb-2">
                        <div class="progress-bar bg-success" style="width: ${(result.scores.energy/50)*100}%" title="Ø§Ù„Ø·Ø§Ù‚Ø©">Ø§Ù„Ø·Ø§Ù‚Ø©</div>
                    </div>
                    <div class="progress mb-2">
                        <div class="progress-bar bg-info" style="width: ${(result.scores.peace/50)*100}%" title="Ø§Ù„Ù‡Ø¯ÙˆØ¡">Ø§Ù„Ù‡Ø¯ÙˆØ¡</div>
                    </div>
                    <div class="progress mb-2">
                        <div class="progress-bar bg-warning" style="width: ${(result.scores.creativity/50)*100}%" title="Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹">Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹</div>
                    </div>
                    <div class="progress mb-2">
                        <div class="progress-bar bg-primary" style="width: ${(result.scores.social/50)*100}%" title="Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©">Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©</div>
                    </div>
                    <div class="progress mb-4">
                        <div class="progress-bar bg-secondary" style="width: ${(result.scores.reflection/50)*100}%" title="Ø§Ù„ØªØ£Ù…Ù„">Ø§Ù„ØªØ£Ù…Ù„</div>
                    </div>
                </div>
                <div class="recommendations mt-4">
                    <h4>ØªÙˆØµÙŠØ§Øª Ù„ØªØ­Ø³ÙŠÙ† Ù…Ø²Ø§Ø¬Ùƒ:</h4>
                    <p>${result.recommendations.split('\n').map(rec => `<div class="alert alert-info">${rec}</div>`).join('')}</p>
                </div>
                <button onclick="saveMood()" class="btn btn-success btn-lg mood-transition">Ø­ÙØ¸ Ø§Ù„Ù…Ø²Ø§Ø¬</button>
                <button onclick="resetQuiz()" class="btn btn-outline-primary btn-lg ms-2 mood-transition">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
            `;
            
            if (moodHistory.length > 0) {
                document.getElementById('moodHistory').style.display = 'block';
                updateMoodHistory();
            }
        }

        function saveMood() {
            const currentMood = document.querySelector('#result h2').textContent;
            const timestamp = new Date().toLocaleString('ar-EG');
            moodHistory.unshift({ mood: currentMood, timestamp });
            if (moodHistory.length > 5) moodHistory.pop();
            
            localStorage.setItem('moodHistory', JSON.stringify(moodHistory));
            document.getElementById('moodHistory').style.display = 'block';
            updateMoodHistory();
        }

        function updateMoodHistory() {
            const badgesContainer = document.getElementById('moodHistoryContainer');
            badgesContainer.innerHTML = '';
            
            moodHistory.forEach(item => {
                const badge = document.createElement('div');
                badge.className = 'badge bg-primary';
                badge.textContent = `${item.mood} - ${item.timestamp}`;
                badgesContainer.appendChild(badge);
            });
        }

        function resetQuiz() {
            currentQuestion = 0;
            answers = [];
            document.getElementById('result').style.display = 'none';
            document.getElementById('moodForm').style.display = 'none';
            document.getElementById('startScreen').style.display = 'block';
            updateProgress();
        }

        // Initialize
        document.getElementById('startButton').addEventListener('click', function(e) {
            e.preventDefault(); // Prevent default form submission
            document.getElementById('startScreen').style.display = 'none';
            showQuestion();
        });

        // Update mood history display on load if exists
        if (moodHistory.length > 0) {
            document.getElementById('moodHistory').style.display = 'block';
            updateMoodHistory();
        }

        // Prevent form submission
        document.getElementById('moodForm').addEventListener('submit', function(e) {
            e.preventDefault();
        });
    </script>
</body>
</html>
