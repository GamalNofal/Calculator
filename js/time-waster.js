// ูุงุฆูุฉ ุงูุฃุณุฆูุฉ
const questions = [
    {
        id: 'procrastination',
        text: 'ูุง ูู ุฃุณููุจู ุงูููุถู ูู ุงูููุงุทูุฉุ',
        options: [
            { value: 'social', text: '๐ฑ ุชุตูุญ ูุณุงุฆู ุงูุชูุงุตู ุงูุงุฌุชูุงุนู ูุณุงุนุงุช', hours: 4 },
            { value: 'videos', text: '๐ฅ ูุดุงูุฏุฉ ููุฏูููุงุช ุนุดูุงุฆูุฉ', hours: 3 },
            { value: 'food', text: '๐ ุงูุจุญุซ ุนู ูุตูุงุช ุทุนุงู ูู ุฃุทุจุฎูุง ุฃุจุฏุงู', hours: 2 },
            { value: 'cleaning', text: '๐งน ุชูุธูู ุงูููุฒู ูุฌุฃุฉ ุนูุฏูุง ูููู ูุฏู ุนูู ููู', hours: 2 }
        ]
    },
    {
        id: 'excuse',
        text: 'ูุง ูู ุนุฐุฑู ุงูููุถู ููุชุฃุฌููุ',
        options: [
            { value: 'tired', text: '๐ด "ุฃูุง ูุชุนุจ ุฌุฏุงู ุงูููู"', hours: 3 },
            { value: 'tomorrow', text: '๐ "ุบุฏุงู ุณุฃููู ุฃูุซุฑ ุฅูุชุงุฌูุฉ"', hours: 4 },
            { value: 'mood', text: '๐ญ "ูุณุช ูู ุงููุฒุงุฌ ุงูููุงุณุจ"', hours: 2 },
            { value: 'research', text: '๐ "ุฃุญุชุงุฌ ููุฒูุฏ ูู ุงูุจุญุซ"', hours: 3 }
        ]
    },
    {
        id: 'distraction',
        text: 'ูุง ุงูุฐู ูุดุชุช ุงูุชุจุงูู ุจุณูููุฉุ',
        options: [
            { value: 'notifications', text: '๐ฑ ุฅุดุนุงุฑุงุช ุงููุงุชู', hours: 3 },
            { value: 'pets', text: '๐ฑ ุญููุงูู ุงูุฃููู ูุฑูุฏ ุงูุงูุชูุงู', hours: 2 },
            { value: 'snacks', text: '๐ช ุงูุฑุบุจุฉ ูู ุชูุงูู ูุฌุจุฉ ุฎูููุฉ', hours: 1 },
            { value: 'thoughts', text: '๐ญ ุฃููุงุฑ ุนุดูุงุฆูุฉ ุชูุงูุงู', hours: 2 }
        ]
    },
    {
        id: 'activity',
        text: 'ูุง ูู ูุดุงุทู ุงูููุถู ูุฅุถุงุนุฉ ุงูููุชุ',
        options: [
            { value: 'shopping', text: '๐ ุงูุชุณูู ุงูุฅููุชุฑููู ุจุฏูู ุดุฑุงุก', hours: 3 },
            { value: 'organizing', text: '๐ ุฅุนุงุฏุฉ ุชูุธูู ุฃุดูุงุก ูุฑุชุจุฉ ุฃุตูุงู', hours: 2 },
            { value: 'planning', text: '๐ ุงูุชุฎุทูุท ูููุณุชูุจู ุจุฏู ุงูุนูู', hours: 2 },
            { value: 'daydreaming', text: '๐ ุฃุญูุงู ุงูููุธุฉ', hours: 1 }
        ]
    },
    {
        id: 'productivity',
        text: 'ููู ุชุชุธุงูุฑ ุจุฃูู ูุดุบููุ',
        options: [
            { value: 'emails', text: '๐ง ูุชุญ ูุฅุบูุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู', hours: 1 },
            { value: 'notes', text: '๐ ูุชุงุจุฉ ููุงุฆู ููุงู ูู ุฃูุฌุฒูุง', hours: 2 },
            { value: 'meetings', text: '๐ฅ ุญุถูุฑ ุงุฌุชูุงุนุงุช ุบูุฑ ุถุฑูุฑูุฉ', hours: 3 },
            { value: 'research', text: '๐ ุงูุจุญุซ ุนู ูุตุงุฆุญ ููุฅูุชุงุฌูุฉ', hours: 2 }
        ]
    }
];

const alternativeActivities = {
    '4': [
        { text: 'ุชุนูู ูุบุฉ ุฌุฏูุฏุฉ ๐ฃ๏ธ', value: '48 ุฏุฑุณ ูุบุฉ' },
        { text: 'ูุฑุงุกุฉ ูุชุงุจ ๐', value: '2 ูุชุงุจ' },
        { text: 'ููุงุฑุณุฉ ุงูุฑูุงุถุฉ ๐โโ๏ธ', value: '24 ุชูุฑูู' }
    ],
    '3': [
        { text: 'ุชุนูู ููุงุฑุฉ ุฌุฏูุฏุฉ ๐ฏ', value: '36 ุฏุฑุณ' },
        { text: 'ุงูุทุจุฎ ๐ณ', value: '18 ูุตูุฉ' },
        { text: 'ุงูุชุฃูู ๐งโโ๏ธ', value: '90 ุฌูุณุฉ' }
    ],
    '2': [
        { text: 'ุงูุนูุงูุฉ ุจุงููุจุงุชุงุช ๐ฑ', value: '24 ูุจุชุฉ' },
        { text: 'ุชุนูู ุงูุนุฒู ๐ต', value: '24 ููุทูุนุฉ' },
        { text: 'ุงูุฑุณู ๐จ', value: '12 ููุญุฉ' }
    ],
    '1': [
        { text: 'ูุชุงุจุฉ ููููุงุช ๐', value: '30 ููุงู' },
        { text: 'ุงูุชุตููุฑ ๐ธ', value: '60 ุตูุฑุฉ' },
        { text: 'ุงูููุฌุง ๐งโโ๏ธ', value: '30 ุฌูุณุฉ' }
    ]
};

// ุชููุฆุฉ ุงูุตูุญุฉ ุนูุฏ ุงูุชุญููู
document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('timeWasterForm');
    const resultDiv = document.getElementById('result');
    const progressBar = document.querySelector('.progress-bar');
    const questionContainer = document.getElementById('questionContainer');

    let currentQuestion = 0;
    const answers = {};

    function showQuestion(index) {
        if (index >= questions.length) {
            showResults();
            return;
        }

        const question = questions[index];
        const progress = ((index + 1) / questions.length) * 100;

        progressBar.style.width = `${progress}%`;
        progressBar.setAttribute('aria-valuenow', progress);

        const optionsHTML = question.options
            .map(option => `
                <div class="form-check custom-option mb-3">
                    <input class="form-check-input" type="radio" 
                           name="question" value="${option.value}" 
                           id="${option.value}" required
                           data-hours="${option.hours}">
                    <label class="form-check-label" for="${option.value}">
                        ${option.text}
                    </label>
                </div>
            `).join('');

        const questionHTML = `
            <div class="question-slide">
                <h3 class="question-title mb-4">${question.text}</h3>
                <div class="options-container">
                    ${optionsHTML}
                </div>
                <button type="submit" class="btn btn-primary w-100 mt-4">
                    ${index === questions.length - 1 ? 'ุงูุชุดู ูุชูุฌุชู! ๐ฏ' : 'ุงูุณุคุงู ุงูุชุงูู โญ๏ธ'}
                </button>
            </div>
        `;

        // Add fade out animation to current question
        if (questionContainer.children.length > 0) {
            questionContainer.children[0].style.animation = 'slideOut 0.3s ease-out';
            setTimeout(() => {
                questionContainer.innerHTML = questionHTML;
                // Add fade in animation to new question
                questionContainer.children[0].style.animation = 'slideIn 0.3s ease-out';
            }, 300);
        } else {
            questionContainer.innerHTML = questionHTML;
            questionContainer.children[0].style.animation = 'slideIn 0.3s ease-out';
        }
    }

    function handleAnswer(e) {
        e.preventDefault();
        const selectedOption = document.querySelector('input[name="question"]:checked');
        if (!selectedOption) return;

        answers[questions[currentQuestion].id] = {
            value: selectedOption.value,
            hours: parseInt(selectedOption.dataset.hours)
        };

        currentQuestion++;
        showQuestion(currentQuestion);
    }

    function calculateTimeWasted() {
        const timeWastingProfiles = {
            'ูุญุชุฑู ุงูููุงุทูุฉ ุงูุฑูููุฉ ๐ฑ': {
                description: 'ุฃูุช ุฎุจูุฑ ูู ุชุถููุน ุงูููุช ุนูู ูุณุงุฆู ุงูุชูุงุตู ุงูุงุฌุชูุงุนู ูุงูุฅูุชุฑูุช!',
                icon: '๐ฑ',
                activities: [
                    'ุชุตูุญ ูุง ููุงุฆู ููุณุงุฆู ุงูุชูุงุตู ุงูุงุฌุชูุงุนู',
                    'ูุดุงูุฏุฉ ููุฏูููุงุช ุนุดูุงุฆูุฉ',
                    'ูุฑุงุกุฉ ุชุนูููุงุช ูุง ููุงูุฉ ููุง'
                ],
                advice: [
                    'ุงุณุชุฎุฏู ุชุทุจููุงุช ุชุชุจุน ููุช ุงุณุชุฎุฏุงู ุงููุงุชู',
                    'ุญุฏุฏ ุฃููุงุชุงู ูุญุฏุฏุฉ ูุชุตูุญ ุงูุณูุดูุงู ููุฏูุง',
                    'ูุนูู ูุถุน ุนุฏู ุงูุฅุฒุนุงุฌ ุฃุซูุงุก ุงูุนูู'
                ]
            },
            'ููุงู ุงูุชุณููู ุงููุจุฏุน ๐จ': {
                description: 'ูุฏูู ูููุจุฉ ุฎุงุตุฉ ูู ุงุจุชูุงุฑ ุฃุนุฐุงุฑ ุฅุจุฏุงุนูุฉ ูุฃูุดุทุฉ ุจุฏููุฉ!',
                icon: '๐จ',
                activities: [
                    'ุฅุนุงุฏุฉ ุชุฑุชูุจ ุงูุบุฑูุฉ ุจุฏู ุฅููุงุก ุงูุนูู',
                    'ุงูุจุญุซ ุนู ูุตูุงุช ุทุนุงู ูุนูุฏุฉ',
                    'ุงูุชุฎุทูุท ุงูููุฑุท ูุฃุดูุงุก ุจุณูุทุฉ'
                ],
                advice: [
                    'ุงุณุชุฎุฏู ุฅุจุฏุงุนู ูู ุชุญููู ุงูููุงู ุงููููุฉ ุฅูู ุชุญุฏูุงุช ููุชุนุฉ',
                    'ุงูุชุจ ูุงุฆูุฉ ููุงู ูุงูุนูุฉ ููุตูุฑุฉ',
                    'ูุงูุฆ ููุณู ุจุนุฏ ุฅูุฌุงุฒ ูู ูููุฉ'
                ]
            },
            'ุฎุจูุฑ ุงูุฃุนุฐุงุฑ ุงููุญุชุฑู ๐ญ': {
                description: 'ูุฏูู ูุฏุฑุฉ ุฎุงุฑูุฉ ุนูู ุงุฎุชุฑุงุน ุงูุฃุนุฐุงุฑ ุงููููุนุฉ!',
                icon: '๐ญ',
                activities: [
                    'ุงุฎุชุฑุงุน ุฃุนุฐุงุฑ ูุนูุฏุฉ',
                    'ุฅููุงุน ููุณู ุจุชุฃุฌูู ุงูููุงู',
                    'ุงูุชุธุงูุฑ ุจุงูุงูุดุบุงู ุงูุดุฏูุฏ'
                ],
                advice: [
                    'ุงุจุฏุฃ ุจููุงู ุตุบูุฑุฉ ูุณููุฉ',
                    'ุถุน ููุนุฏุงู ููุงุฆูุงู ููู ูููุฉ',
                    'ุดุงุฑู ุฃูุฏุงูู ูุน ุตุฏูู ููุณุงุนุฏู ูู ุงููุชุงุจุนุฉ'
                ]
            },
            'ููู ุงูุชุดุชุช ุงููุชุนุฏุฏ ุงูููุงู ๐': {
                description: 'ุฃูุช ููููุจ ูู ุจุฏุก ุนุฏุฉ ููุงู ุฏูู ุฅููุงุก ุฃู ูููุง!',
                icon: '๐',
                activities: [
                    'ูุชุญ ุนุฏุฉ ูุดุงุฑูุน ูู ููุณ ุงูููุช',
                    'ุงูุชููู ุจูู ุงูููุงู ุจุณุฑุนุฉ',
                    'ูุณูุงู ูุง ููุช ุชูุนูู ุฃุตูุงู'
                ],
                advice: [
                    'ุฑูุฒ ุนูู ูููุฉ ูุงุญุฏุฉ ูู ูู ูุฑุฉ',
                    'ุงุณุชุฎุฏู ุชูููุฉ ุจูููุฏูุฑู (25 ุฏูููุฉ ุนููุ 5 ุฏูููุฉ ุฑุงุญุฉ)',
                    'ุฃุบูู ูู ุงูุชุทุจููุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ'
                ]
            }
        };

        // Calculate total hours wasted
        const totalHours = Object.values(answers).reduce((sum, answer) => sum + answer.hours, 0);
        
        // Determine profile based on answers
        let profile = '';
        if (answers.procrastination.value === 'social' || answers.distraction.value === 'notifications') {
            profile = 'ูุญุชุฑู ุงูููุงุทูุฉ ุงูุฑูููุฉ ๐ฑ';
        } else if (answers.activity.value === 'organizing' || answers.excuse.value === 'mood') {
            profile = 'ููุงู ุงูุชุณููู ุงููุจุฏุน ๐จ';
        } else if (answers.excuse.value === 'tomorrow' || answers.productivity.value === 'notes') {
            profile = 'ุฎุจูุฑ ุงูุฃุนุฐุงุฑ ุงููุญุชุฑู ๐ญ';
        } else {
            profile = 'ููู ุงูุชุดุชุช ุงููุชุนุฏุฏ ุงูููุงู ๐';
        }

        const profileData = timeWastingProfiles[profile];
        
        // Calculate yearly statistics
        const yearlyHours = totalHours * 52; // 52 weeks in a year
        const yearlyDays = Math.round(yearlyHours / 24);
        const yearlySalary = yearlyHours * 50; // Assuming average hourly rate of 50 SAR

        // Get alternative activities based on daily hours
        const dailyHours = Math.round(totalHours / 7); // Average daily hours
        const alternatives = alternativeActivities[dailyHours] || alternativeActivities['2'];

        return {
            ...profileData,
            totalHours,
            yearlyStats: {
                hours: yearlyHours,
                days: yearlyDays,
                salary: yearlySalary
            },
            alternatives
        };
    }

    function showResults() {
        const result = calculateTimeWasted();
        const { yearlyStats, alternatives } = result;

        resultDiv.innerHTML = `
            <div class="result-container">
                <div class="profile-section text-center mb-5">
                    <div class="profile-icon mb-3">${result.icon}</div>
                    <h2 class="mb-3">${result.description}</h2>
                    
                    <div class="yearly-stats mt-4">
                        <div class="row g-4">
                            <div class="col-md-4">
                                <div class="stat-card">
                                    <div class="stat-icon">โฐ</div>
                                    <div class="stat-value">${yearlyStats.hours}</div>
                                    <div class="stat-label">ุณุงุนุฉ ูู ุงูุณูุฉ</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stat-card">
                                    <div class="stat-icon">๐</div>
                                    <div class="stat-value">${yearlyStats.days}</div>
                                    <div class="stat-label">ููู ูู ุงูุณูุฉ</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stat-card">
                                    <div class="stat-icon">๐ฐ</div>
                                    <div class="stat-value">${yearlyStats.salary.toLocaleString()}</div>
                                    <div class="stat-label">ุฑูุงู ููุฏุฑ</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="activities-section mb-5">
                    <h3 class="text-center mb-4">ุฃูุดุทุชู ุงูููุถูุฉ ูุฅุถุงุนุฉ ุงูููุช ๐ฏ</h3>
                    <div class="activities-list">
                        ${result.activities.map(activity => `
                            <div class="activity-item">
                                <i class="bi bi-check2-circle"></i>
                                <span>${activity}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="alternatives-section mb-5">
                    <h3 class="text-center mb-4">ูุงุฐุง ููููู ุฃู ุชูุนู ุจูุฐุง ุงูููุชุ ๐</h3>
                    <div class="row g-4">
                        ${alternatives.map(alt => `
                            <div class="col-md-4">
                                <div class="alternative-card">
                                    <div class="alternative-text">${alt.text}</div>
                                    <div class="alternative-value">${alt.value}</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="advice-section mb-5">
                    <h3 class="text-center mb-4">ูุตุงุฆุญ ูุชุญุณูู ุฅุฏุงุฑุฉ ููุชู โจ</h3>
                    <div class="advice-list">
                        ${result.advice.map(tip => `
                            <div class="advice-item">
                                <i class="bi bi-lightbulb"></i>
                                <span>${tip}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="actions mt-4 text-center">
                    <button onclick="location.reload()" class="btn btn-primary btn-lg">
                        ุงุฎุชุจุฑ ููุณู ูุฑุฉ ุฃุฎุฑู! ๐
                    </button>
                    <button onclick="shareResults()" class="btn btn-outline-primary btn-lg ms-2">
                        ุดุงุฑู ุงููุชูุฌุฉ! ๐
                    </button>
                </div>
            </div>
        `;
        
        resultDiv.style.display = 'block';
        
        // Animate stats cards
        setTimeout(() => {
            document.querySelectorAll('.stat-card').forEach((card, index) => {
                card.style.animation = `fadeInUp 0.5s ease-out ${index * 0.2}s forwards`;
            });
        }, 100);

        resultDiv.scrollIntoView({ behavior: 'smooth' });
    }

    function shareResults() {
        alert('ูุฑูุจุงู! ุณูุชู ุฅุถุงูุฉ ุฎุงุตูุฉ ูุดุงุฑูุฉ ุงููุชุงุฆุฌ ูู ุงูุชุญุฏูุซ ุงููุงุฏู ๐');
    }

    // ุชููุฆุฉ ุงูุงุฎุชุจุงุฑ
    showQuestion(0);
    form.addEventListener('submit', handleAnswer);
});
