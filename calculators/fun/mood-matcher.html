<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุญุงุณุจุฉ ูุทุงุจูุฉ ุงููุฒุงุฌ - ุงูุชุดู ูุฒุงุฌู ุงูุญุงูู</title>
    <meta name="description" content="ุงูุชุดู ูุฒุงุฌู ุงูุญุงูู ูู ุฎูุงู ูุฌููุนุฉ ูู ุงูุฃุณุฆูุฉ ุงูุนุดูุงุฆูุฉ ุงูููุชุนุฉ! ุชุนุฑู ุนูู ุญุงูุชู ุงููุฒุงุฌูุฉ">
    <meta name="keywords" content="ุญุงุณุจุฉ ุงููุฒุงุฌ, ูุทุงุจูุฉ ุงููุฒุงุฌ, ุญุงุณุจุฉ ูุถุญูุฉ, ุชุญููู ุงููุฒุงุฌ">
    <meta name="author" content="ุงูุขูุงุช ุงูุญุงุณุจุฉ ุงูุดุงููุฉ">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../css/calculator.css">
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/no-theme-toggle.css">
    <style>
        .mood-transition {
            transition: all 0.3s ease-in-out;
        }
        .answer-button {
            transition: transform 0.2s;
            margin: 10px;
            width: 80%;
        }
        .answer-button:hover {
            transform: scale(1.05);
        }
        .mood-emoji {
            font-size: 4rem;
            margin: 20px;
            animation: bounce 1s infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .mood-trend {
            padding: 15px;
            margin-top: 20px;
            border-radius: 10px;
            background: #f8f9fa;
        }
        .badge {
            margin: 5px;
            padding: 8px 15px;
            font-size: 0.9rem;
        }
    </style>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EG5T75NQHF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-EG5T75NQHF');
    </script>
</head>
<body>
    <header class="bg-white shadow-sm">
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <a class="navbar-brand site-logo" href="../../index.html">ุงูุขูุงุช ุงูุญุงุณุจุฉ ุงูุดุงููุฉ</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="../../index.html">ุงูุฑุฆูุณูุฉ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="../fun.html">ุงูุญุงุณุจุงุช ุงููุถุญูุฉ</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <div class="calculator-container">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <h1 class="category-title text-center">ุญุงุณุจุฉ ูุทุงุจูุฉ ุงููุฒุงุฌ ๐</h1>
                        
                        <div class="card calculator-card">
                            <div class="card-body">
                                <div id="startScreen" class="text-center p-4 mb-4">
                                    <h2 class="mb-4">ุงูุชุดู ูุฒุงุฌู ุงูุญุงูู!</h2>
                                    <p class="lead mb-4">ุฃุฌุจ ุนูู ุจุนุถ ุงูุฃุณุฆูุฉ ุงูุจุณูุทุฉ ูููุชุดู ูุนุงู ุญุงูุชู ุงููุฒุงุฌูุฉ ๐ฏ</p>
                                    <button id="startButton" class="btn btn-primary btn-lg">ุงุจุฏุฃ ุงูุขู</button>
                                </div>

                                <form id="moodForm" class="calculator-form" style="display: none;">
                                    <div class="progress mb-4">
                                        <div class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <div id="questionContainer" class="text-center">
                                        <!-- ุงูุฃุณุฆูุฉ ุณุชุธูุฑ ููุง -->
                                    </div>
                                </form>

                                <div id="result" class="text-center" style="display: none;">
                                    <!-- ุงููุชุงุฆุฌ ุณุชุธูุฑ ููุง -->
                                </div>

                                <div id="moodHistory" class="mt-4" style="display: none;">
                                    <h3 class="text-center">ุณุฌู ูุฒุงุฌู ุงูุณุงุจู</h3>
                                    <div id="moodHistoryContainer" class="d-flex flex-wrap justify-content-center gap-2">
                                        <!-- ุณุฌู ุงููุฒุงุฌ ุงูุณุงุจู ุณูุธูุฑ ููุง -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="info-box mt-5">
                            <h4>ุญูุงุฆู ุนู ุงููุฒุงุฌ</h4>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">ุงููุฒุงุฌ ุงูุฅูุฌุงุจู ูุนุฒุฒ ุฌูุงุฒ ุงูููุงุนุฉ! ๐</li>
                                <li class="list-group-item">ุงูุถุญู ูุทูู ูุฑูููุงุช ุงูุณุนุงุฏุฉ ูู ุงูุฌุณู! ๐</li>
                                <li class="list-group-item">ุงูุชูุงุฑูู ุงูุฑูุงุถูุฉ ุชุญุณู ุงููุฒุงุฌ ุจุดูู ููุฑู! ๐โโ๏ธ</li>
                                <li class="list-group-item">ุงูููุณููู ููุง ุชุฃุซูุฑ ููู ุนูู ุชุบููุฑ ูุฒุงุฌูุง! ๐ต</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer bg-light">
        <div class="container">
            <p class="mb-0">ุฌููุน ุงูุญููู ูุญููุธุฉ 2024 ุงูุขูุงุช ุงูุญุงุณุจุฉ ุงูุดุงููุฉ</p>
        </div>
    </footer>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JavaScript -->
    <script src="../../js/utils.js"></script>
    <script src="../../js/theme.js"></script>
    <script>
        const questions = [
            {
                question: "ููู ุชุตู ุทุงูุชู ูู ูุฐู ุงููุญุธุฉุ",
                answers: [
                    { text: "ูุชุญูุณ ููููุก ุจุงููุดุงุท โก", score: { energy: 10, social: 8, creativity: 5 } },
                    { text: "ูุงุฏุฆ ููุณุชุฑุฎู ๐ฟ", score: { peace: 10, reflection: 7 } },
                    { text: "ูุชุนุจ ูุฎุงูู ๐ด", score: { energy: -5, peace: 5 } },
                    { text: "ูุชูุชุฑ ูููู ๐ฐ", score: { peace: -5, energy: 5 } },
                    { text: "ูุนุชุฏู ููุชูุงุฒู ๐", score: { peace: 7, energy: 7 } }
                ]
            },
            {
                question: "ูุง ูู ุฃูู ุดูุก ุฌุฐุจ ุงูุชุจุงูู ุงููููุ",
                answers: [
                    { text: "ุงูุณูุงุก ุงูุฒุฑูุงุก ๐ค๏ธ", score: { peace: 8, reflection: 7 } },
                    { text: "ููุฌุงู ุงููููุฉ โ", score: { energy: 6, creativity: 5 } },
                    { text: "ุตูุช ุงูููุณููู ๐ต", score: { creativity: 8, social: 6 } },
                    { text: "ุงุจุชุณุงูุฉ ุดุฎุต ูุง ๐", score: { social: 9, peace: 6 } },
                    { text: "ุดูุก ุฌููู ูู ุงูุทุจูุนุฉ ๐ธ", score: { reflection: 9, peace: 7 } }
                ]
            },
            {
                question: "ูุง ูู ููุน ุงูููุณููู ุงูุฐู ุชุฑูุฏ ุณูุงุนู ุงูุขูุ",
                answers: [
                    { text: "ููุณููู ุญูุงุณูุฉ ๐ธ", score: { energy: 9, social: 7 } },
                    { text: "ููุณููู ูุงุฏุฆุฉ ๐น", score: { peace: 9, reflection: 7 } },
                    { text: "ุฃุบุงูู ุญุฒููุฉ ๐ป", score: { reflection: 8, creativity: 6 } },
                    { text: "ููุณููู ุฑุงูุตุฉ ๐", score: { social: 9, energy: 8 } },
                    { text: "ุตูุช ุชุงู ๐คซ", score: { peace: 8, reflection: 9 } }
                ]
            },
            {
                question: "ูุง ูู ูุดุงุทู ุงูููุถู ูู ูุฐู ุงููุญุธุฉุ",
                answers: [
                    { text: "ุงูุฎุฑูุฌ ูุน ุงูุฃุตุฏูุงุก ๐ฅ", score: { social: 10, energy: 8 } },
                    { text: "ุงููุฑุงุกุฉ ูู ูุฏูุก ๐", score: { peace: 9, reflection: 8 } },
                    { text: "ููุงุฑุณุฉ ุงูุฑูุงุถุฉ ๐โโ๏ธ", score: { energy: 10, creativity: 5 } },
                    { text: "ูุดุงูุฏุฉ ูููู ๐ฌ", score: { creativity: 7, peace: 6 } },
                    { text: "ุงูููู ๐ด", score: { peace: 8, reflection: 5 } }
                ]
            },
            {
                question: "ููู ุชุชุฎูู ุจููุฉ ููููุ",
                answers: [
                    { text: "ูููุก ุจุงููุบุงูุฑุงุช ๐ข", score: { energy: 9, creativity: 8 } },
                    { text: "ูุงุฏุฆ ููุฑูุญ ๐๏ธ", score: { peace: 9, reflection: 7 } },
                    { text: "ูุดุบูู ูููุชุฌ ๐ผ", score: { energy: 8, creativity: 7 } },
                    { text: "ุงุฌุชูุงุนู ููุฑุญ ๐", score: { social: 10, energy: 7 } },
                    { text: "ุนุงุฏู ูุฑูุชููู ๐", score: { peace: 6, reflection: 5 } }
                ]
            }
        ];

        let currentQuestion = 0;
        let answers = [];
        let moodHistory = JSON.parse(localStorage.getItem('moodHistory')) || [];

        function updateProgress() {
            const progress = ((currentQuestion) / questions.length) * 100;
            document.querySelector('.progress-bar').style.width = `${progress}%`;
        }

        function showQuestion() {
            const questionCard = document.getElementById('questionContainer');
            const questionText = document.createElement('h3');
            questionText.className = 'mood-transition mb-4';
            questionText.textContent = questions[currentQuestion].question;
            questionCard.innerHTML = '';
            questionCard.appendChild(questionText);
            
            questions[currentQuestion].answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.className = 'btn btn-outline-primary answer-button mood-transition';
                button.textContent = answer.text;
                button.onclick = () => selectAnswer(answer);
                questionCard.appendChild(button);
            });
            
            document.getElementById('moodForm').style.display = 'block';
            updateProgress();
        }

        function selectAnswer(answer) {
            answers.push(answer);
            
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                setTimeout(() => {
                    showQuestion();
                }, 300);
            } else {
                setTimeout(() => {
                    showResult();
                }, 300);
            }
        }

        function analyzeMood() {
            const scores = {
                energy: 0,
                peace: 0,
                creativity: 0,
                reflection: 0,
                social: 0
            };

            // Calculate total scores
            answers.forEach(answer => {
                Object.entries(answer.score).forEach(([trait, value]) => {
                    scores[trait] += value;
                });
            });

            // Find dominant traits
            const maxScore = Math.max(...Object.values(scores));
            const dominantTraits = Object.entries(scores)
                .filter(([trait, score]) => score >= maxScore - 5)
                .map(([trait]) => trait);

            // Map traits to moods
            const moodMap = {
                energy: { mood: "ูุชุญูุณ ููููุก ุจุงูุทุงูุฉ", emoji: "๐" },
                peace: { mood: "ูุงุฏุฆ ููุชูุงุฒู", emoji: "๐ฟ" },
                creativity: { mood: "ูุจุฏุน ููุจุชูุฑ", emoji: "๐จ" },
                reflection: { mood: "ูุชุฃูู ููููุฑ", emoji: "๐ค" },
                social: { mood: "ุงุฌุชูุงุนู ููุฑุญ", emoji: "๐" }
            };

            // Select primary mood based on highest score
            const primaryTrait = Object.entries(scores)
                .reduce((a, b) => b[1] > a[1] ? b : a)[0];

            const mood = moodMap[primaryTrait];
            return {
                mood: `${mood.mood} ${mood.emoji}`,
                scores: scores,
                recommendations: getRecommendations(primaryTrait, dominantTraits)
            };
        }

        function getRecommendations(primaryTrait, traits) {
            const recommendations = {
                energy: [
                    "ุงุณุชุบู ุทุงูุชู ูู ููุงุฑุณุฉ ุงูุฑูุงุถุฉ! ๐โโ๏ธ",
                    "ุงุจุฏุฃ ูุดุฑูุนุงู ุฌุฏูุฏุงู ูุซูุฑุงู! ๐",
                    "ุดุงุฑู ูู ูุดุงุท ุฌูุงุนู ุญูุงุณู! ๐ฏ"
                ],
                peace: [
                    "ุงุณุชูุชุน ุจุฌูุณุฉ ุชุฃูู ูุงุฏุฆุฉ ๐งโโ๏ธ",
                    "ุงูุฑุฃ ูุชุงุจุงู ูู ููุงู ูุงุฏุฆ ๐",
                    "ุชูุฒู ูู ุงูุทุจูุนุฉ ๐ณ"
                ],
                creativity: [
                    "ุฌุฑุจ ุฑุณู ุดูุก ุฌุฏูุฏ ๐จ",
                    "ุงูุชุจ ูุตุฉ ูุตูุฑุฉ โ๏ธ",
                    "ุชุนูู ููุงุฑุฉ ุฅุจุฏุงุนูุฉ ุฌุฏูุฏุฉ ๐ฏ"
                ],
                reflection: [
                    "ุฏููู ุฃููุงุฑู ูู ูุฐูุฑุงุชู ๐",
                    "ุชุฃูู ูู ุงูุทุจูุนุฉ ๐",
                    "ุฎุทุท ูุฃูุฏุงูู ุงููุณุชูุจููุฉ ๐ฏ"
                ],
                social: [
                    "ุงุชุตู ุจุตุฏูู ูุฏูู ๐ฑ",
                    "ูุธู ููุงุกู ุตุบูุฑุงู ูุน ุงูุฃุญุจุงุจ ๐ฅ",
                    "ุดุงุฑู ูู ูุดุงุท ุงุฌุชูุงุนู ๐"
                ]
            };

            // Get primary recommendations
            const primaryRecs = recommendations[primaryTrait];
            
            // Get one random recommendation for each additional trait
            const additionalRecs = traits
                .filter(trait => trait !== primaryTrait)
                .map(trait => {
                    const traitRecs = recommendations[trait];
                    return traitRecs[Math.floor(Math.random() * traitRecs.length)];
                });

            return [...primaryRecs, ...additionalRecs].join('\n');
        }

        function showResult() {
            const result = analyzeMood();
            document.getElementById('moodForm').style.display = 'none';
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            
            // Create mood visualization
            const moodEmoji = result.mood.split(' ').pop();
            
            resultDiv.innerHTML = `
                <div class="mood-emoji">${moodEmoji}</div>
                <h2 class="mood-transition">ูุฒุงุฌู ุงูุญุงูู: ${result.mood}</h2>
                <div class="mood-trend">
                    <h4>ุชุญููู ูุฒุงุฌู:</h4>
                    <div class="progress mb-2">
                        <div class="progress-bar bg-success" style="width: ${(result.scores.energy/50)*100}%" title="ุงูุทุงูุฉ">ุงูุทุงูุฉ</div>
                    </div>
                    <div class="progress mb-2">
                        <div class="progress-bar bg-info" style="width: ${(result.scores.peace/50)*100}%" title="ุงููุฏูุก">ุงููุฏูุก</div>
                    </div>
                    <div class="progress mb-2">
                        <div class="progress-bar bg-warning" style="width: ${(result.scores.creativity/50)*100}%" title="ุงูุฅุจุฏุงุน">ุงูุฅุจุฏุงุน</div>
                    </div>
                    <div class="progress mb-2">
                        <div class="progress-bar bg-primary" style="width: ${(result.scores.social/50)*100}%" title="ุงูุงุฌุชูุงุนูุฉ">ุงูุงุฌุชูุงุนูุฉ</div>
                    </div>
                    <div class="progress mb-4">
                        <div class="progress-bar bg-secondary" style="width: ${(result.scores.reflection/50)*100}%" title="ุงูุชุฃูู">ุงูุชุฃูู</div>
                    </div>
                </div>
                <div class="recommendations mt-4">
                    <h4>ุชูุตูุงุช ูุชุญุณูู ูุฒุงุฌู:</h4>
                    <p>${result.recommendations.split('\n').map(rec => `<div class="alert alert-info">${rec}</div>`).join('')}</p>
                </div>
                <button onclick="saveMood()" class="btn btn-success btn-lg mood-transition">ุญูุธ ุงููุฒุงุฌ</button>
                <button onclick="resetQuiz()" class="btn btn-outline-primary btn-lg ms-2 mood-transition">ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ</button>
            `;
            
            if (moodHistory.length > 0) {
                document.getElementById('moodHistory').style.display = 'block';
                updateMoodHistory();
            }
        }

        function saveMood() {
            const currentMood = document.querySelector('#result h2').textContent;
            const timestamp = new Date().toLocaleString('ar-EG');
            moodHistory.unshift({ mood: currentMood, timestamp });
            if (moodHistory.length > 5) moodHistory.pop();
            
            localStorage.setItem('moodHistory', JSON.stringify(moodHistory));
            document.getElementById('moodHistory').style.display = 'block';
            updateMoodHistory();
        }

        function updateMoodHistory() {
            const badgesContainer = document.getElementById('moodHistoryContainer');
            badgesContainer.innerHTML = '';
            
            moodHistory.forEach(item => {
                const badge = document.createElement('div');
                badge.className = 'badge bg-primary';
                badge.textContent = `${item.mood} - ${item.timestamp}`;
                badgesContainer.appendChild(badge);
            });
        }

        function resetQuiz() {
            currentQuestion = 0;
            answers = [];
            document.getElementById('result').style.display = 'none';
            document.getElementById('moodForm').style.display = 'none';
            document.getElementById('startScreen').style.display = 'block';
            updateProgress();
        }

        // Initialize
        document.getElementById('startButton').addEventListener('click', function(e) {
            e.preventDefault(); // Prevent default form submission
            document.getElementById('startScreen').style.display = 'none';
            showQuestion();
        });

        // Update mood history display on load if exists
        if (moodHistory.length > 0) {
            document.getElementById('moodHistory').style.display = 'block';
            updateMoodHistory();
        }

        // Prevent form submission
        document.getElementById('moodForm').addEventListener('submit', function(e) {
            e.preventDefault();
        });
    </script>
</body>
</html>
