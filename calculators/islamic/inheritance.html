<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>حاسبة المواريث - الآلات الحاسبة الشاملة</title>
    <meta name="description" content="حاسبة المواريث - احسب المواريث الشرعية بدقة وفقاً لأحكام الشريعة الإسلامية">
    <meta name="theme-color" content="#198754">
    <meta name="google-adsense-account" content="ca-pub-5346000361286122">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5346000361286122" crossorigin="anonymous"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-5346000361286122",
            enable_page_level_ads: true
        });
    </script>
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EG5T75NQHF"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-EG5T75NQHF');
    </script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../css/style.css">
    <style>
        body {
            font-family: 'Cairo', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f8f9fa;
        }
        .calculator-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            background: white;
            border-radius: 15px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
        }
        .section-title {
            color: #198754;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }
        .section-title i {
            font-size: 1.25rem;
        }
        .heirs-group {
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        .heir-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        .share-result {
            font-size: 1.2rem;
            font-weight: 600;
            color: #198754;
        }
        .inheritance-tree {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .inheritance-tree .tree-node {
            margin: 5px 0;
            padding: 5px 10px;
            border-right: 3px solid #198754;
        }
        .form-label {
            font-weight: 500;
            color: #666;
            margin-bottom: 0.5rem;
        }
        .result-box {
            background: #e7f5e7;
            color: #333;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .calculation-details {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            margin-bottom: 1rem;
        }

        .calculation-note {
            color: #666;
            font-size: 0.9rem;
            padding: 1rem;
            background: rgba(25, 135, 84, 0.1);
            border-radius: 4px;
            margin-top: 1rem;
        }

        .inheritance-tree-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .tree-node {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 8px 16px;
            margin: 4px 0;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #333;
            transition: all 0.3s ease;
        }

        .tree-node:hover {
            background: #e9ecef;
        }

        .tree-node i {
            color: #198754;
        }

        .tree-node-share {
            margin-right: auto;
            background: rgba(25, 135, 84, 0.1);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.9em;
            color: #198754;
        }

        .calculate-btn {
            background: #198754;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 4px;
            font-weight: 500;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            width: 100%;
            margin-top: 1rem;
        }

        .calculate-btn:hover {
            background: #157347;
        }

        .calculate-btn i {
            color: white;
        }

        .header {
            background-color: #198754;
            color: white;
            padding: 1rem;
            border-radius: 4px;
            margin-bottom: 2rem;
        }

        .form-control:focus {
            border-color: #198754;
            box-shadow: 0 0 0 0.2rem rgba(25, 135, 84, 0.25);
        }

        .form-check-input:checked {
            background-color: #198754;
            border-color: #198754;
        }

        /* Additional styles for better layout */
        .calculator-container {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        h1.calculator-title {
            color: #198754;
            margin-bottom: 2rem;
            text-align: center;
        }

        .estate-section, .heirs-section {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="navbar navbar-expand">
                <div class="container-fluid">
                    <a class="navbar-brand" href="../../index.html">
                        <i class="bi bi-calculator"></i>
                        الآلات الحاسبة الشاملة
                    </a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav me-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="../../index.html">الرئيسية</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active" href="../islamic.html">الحاسبات الإسلامية</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <main class="container py-5">
        <div class="calculator-container">
            <h1 class="text-center mb-4">
                <i class="bi bi-calculator"></i>
                حاسبة المواريث
            </h1>
            
            <div class="row">
                <div class="col-lg-6 mb-4">
                    <form id="inheritanceForm">
                        <!-- التركة -->
                        <div class="estate-section mb-4">
                            <h3 class="section-title">
                                <i class="bi bi-cash-stack"></i>
                                التركة والديون
                            </h3>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label">إجمالي التركة</label>
                                    <div class="input-group">
                                        <input type="number" 
                                               class="form-control" 
                                               id="totalEstate" 
                                               min="0" 
                                               step="0.01" 
                                               required
                                               placeholder="0.00">
                                        <select class="form-select" id="estateCurrency" style="max-width: 140px;">
                                            <option value="SAR" data-symbol="ر.س">ريال سعودي</option>
                                            <option value="EGP" data-symbol="ج.م">جنيه مصري</option>
                                            <option value="USD" data-symbol="$">دولار أمريكي</option>
                                            <option value="EUR" data-symbol="€">يورو</option>
                                            <option value="GBP" data-symbol="£">جنيه إسترليني</option>
                                            <option value="AED" data-symbol="د.إ">درهم إماراتي</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">الديون والوصايا</label>
                                    <input type="number" 
                                           class="form-control" 
                                           id="debts" 
                                           min="0" 
                                           step="0.01"
                                           placeholder="0.00">
                                </div>
                            </div>
                        </div>

                        <!-- الورثة -->
                        <div class="heirs-section mb-4">
                            <h3 class="section-title">
                                <i class="bi bi-people"></i>
                                الورثة
                            </h3>

                            <!-- الزوجية -->
                            <div class="card mb-3">
                                <div class="card-header bg-light">
                                    <h5 class="mb-0">
                                        <i class="bi bi-heart text-danger"></i>
                                        الزوجية
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="btn-group w-100" role="group">
                                        <input type="radio" class="btn-check" name="spouse" id="noSpouse" value="none" checked>
                                        <label class="btn btn-outline-secondary" for="noSpouse">
                                            <i class="bi bi-x-circle"></i>
                                            لا يوجد
                                        </label>
                                        
                                        <input type="radio" class="btn-check" name="spouse" id="husband" value="husband">
                                        <label class="btn btn-outline-secondary" for="husband">
                                            <i class="bi bi-person"></i>
                                            زوج
                                        </label>
                                        
                                        <input type="radio" class="btn-check" name="spouse" id="wife" value="wife">
                                        <label class="btn btn-outline-secondary" for="wife">
                                            <i class="bi bi-person-heart"></i>
                                            زوجة
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- الأبناء -->
                            <div class="card mb-3">
                                <div class="card-header bg-light">
                                    <h5 class="mb-0">
                                        <i class="bi bi-people text-success"></i>
                                        الأبناء
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <label class="form-label">عدد الذكور</label>
                                            <div class="input-group">
                                                <button type="button" class="btn btn-outline-secondary" onclick="this.nextElementSibling.stepDown()">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                <input type="number" 
                                                       class="form-control text-center" 
                                                       id="numSons" 
                                                       min="0" 
                                                       value="0"
                                                       style="max-width: 100px;">
                                                <button type="button" class="btn btn-outline-secondary" onclick="this.previousElementSibling.stepUp()">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">عدد الإناث</label>
                                            <div class="input-group">
                                                <button type="button" class="btn btn-outline-secondary" onclick="this.nextElementSibling.stepDown()">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                <input type="number" 
                                                       class="form-control text-center" 
                                                       id="numDaughters" 
                                                       min="0" 
                                                       value="0"
                                                       style="max-width: 100px;">
                                                <button type="button" class="btn btn-outline-secondary" onclick="this.previousElementSibling.stepUp()">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- الوالدين -->
                            <div class="card mb-3">
                                <div class="card-header bg-light">
                                    <h5 class="mb-0">
                                        <i class="bi bi-people text-info"></i>
                                        الوالدين
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="row g-3">
                                        <div class="col-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="hasFather">
                                                <label class="form-check-label" for="hasFather">
                                                    <i class="bi bi-person"></i>
                                                    الأب
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="hasMother">
                                                <label class="form-check-label" for="hasMother">
                                                    <i class="bi bi-person-heart"></i>
                                                    الأم
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- الإخوة والأخوات -->
                            <div class="card mb-3">
                                <div class="card-header bg-light">
                                    <h5 class="mb-0">
                                        <i class="bi bi-people text-warning"></i>
                                        الإخوة والأخوات
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <label class="form-label">الإخوة الأشقاء</label>
                                            <div class="input-group">
                                                <button type="button" class="btn btn-outline-secondary" onclick="this.nextElementSibling.stepDown()">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                <input type="number" 
                                                       class="form-control text-center" 
                                                       id="numFullBrothers" 
                                                       min="0" 
                                                       value="0"
                                                       style="max-width: 100px;">
                                                <button type="button" class="btn btn-outline-secondary" onclick="this.previousElementSibling.stepUp()">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">الأخوات الشقيقات</label>
                                            <div class="input-group">
                                                <button type="button" class="btn btn-outline-secondary" onclick="this.nextElementSibling.stepDown()">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                <input type="number" 
                                                       class="form-control text-center" 
                                                       id="numFullSisters" 
                                                       min="0" 
                                                       value="0"
                                                       style="max-width: 100px;">
                                                <button type="button" class="btn btn-outline-secondary" onclick="this.previousElementSibling.stepUp()">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">الإخوة لأب</label>
                                            <div class="input-group">
                                                <button type="button" class="btn btn-outline-secondary" onclick="this.nextElementSibling.stepDown()">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                <input type="number" 
                                                       class="form-control text-center" 
                                                       id="numPaternalBrothers" 
                                                       min="0" 
                                                       value="0"
                                                       style="max-width: 100px;">
                                                <button type="button" class="btn btn-outline-secondary" onclick="this.previousElementSibling.stepUp()">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">الأخوات لأب</label>
                                            <div class="input-group">
                                                <button type="button" class="btn btn-outline-secondary" onclick="this.nextElementSibling.stepDown()">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                <input type="number" 
                                                       class="form-control text-center" 
                                                       id="numPaternalSisters" 
                                                       min="0" 
                                                       value="0"
                                                       style="max-width: 100px;">
                                                <button type="button" class="btn btn-outline-secondary" onclick="this.previousElementSibling.stepUp()">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- زر الحساب -->
                            <div class="text-center mt-4">
                                <button type="submit" class="calculate-btn">
                                    <i class="bi bi-calculator-fill me-2"></i>
                                    احسب المواريث
                                </button>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="col-lg-6">
                    <!-- نتيجة الحساب -->
                    <div id="resultCard" class="result-box" style="display: none;">
                        <h3 class="text-center mb-4">نتيجة الحساب</h3>
                        
                        <div class="calculation-details p-3 mb-3 rounded" style="background: rgba(255,255,255,0.1);">
                            <div class="mb-3">
                                <h4 class="mb-2">تفاصيل التركة:</h4>
                                <div id="estateDetails" class="mb-2"></div>
                                <div id="debtsDetails" class="mb-2"></div>
                                <div id="netEstateDetails" class="mb-2"></div>
                            </div>
                            
                            <div class="mb-3">
                                <h4 class="mb-2">الورثة وأنصبتهم:</h4>
                                <div id="heirsDetails"></div>
                            </div>

                            <div class="inheritance-tree mt-4">
                                <h4 class="mb-2">شجرة الورثة:</h4>
                                <div id="inheritanceTree" class="inheritance-tree-container"></div>
                            </div>
                        </div>

                        <div class="calculation-note mt-3" style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                            <i class="bi bi-info-circle me-1"></i>
                            ملاحظة: هذه الحاسبة تقدم تقديراً تقريبياً للمواريث. للحصول على فتوى دقيقة، يرجى استشارة عالم شرعي.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer bg-light">
        <div class="container">
            <p class="mb-0">جميع الحقوق محفوظة &copy; 2024 الآلات الحاسبة الشاملة</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // تنسيق العملة
        function formatCurrency(amount) {
            const currency = document.getElementById('estateCurrency').value;
            return new Intl.NumberFormat('ar-SA', {
                style: 'currency',
                currency: currency,
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(amount);
        }

        class InheritanceCalculator {
            constructor() {
                this.initializeCalculator();
                this.shares = {
                    husband: { withChildren: 1/4, withoutChildren: 1/2 },
                    wife: { withChildren: 1/8, withoutChildren: 1/4 },
                    father: { withChildren: 1/6, withoutChildren: 'remainder' },
                    mother: { withChildren: 1/6, withoutChildren: 1/3 }
                };
            }

            initializeCalculator() {
                document.getElementById('inheritanceForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.calculateInheritance();
                });
            }

            calculateShares(estate, heirs) {
                let shares = {};
                let remainingShare = 1;
                let hasChildren = heirs.numSons > 0 || heirs.numDaughters > 0;

                // حساب نصيب الزوج/الزوجة
                if (heirs.spouse === 'husband') {
                    const share = hasChildren ? this.shares.husband.withChildren : this.shares.husband.withoutChildren;
                    shares.husband = { amount: estate * share, fraction: share };
                    remainingShare -= share;
                } else if (heirs.spouse === 'wife') {
                    const share = hasChildren ? this.shares.wife.withChildren : this.shares.wife.withoutChildren;
                    shares.wife = { amount: estate * share, fraction: share };
                    remainingShare -= share;
                }

                // حساب نصيب الوالدين
                if (heirs.hasFather) {
                    const share = hasChildren ? this.shares.father.withChildren : 
                                (this.shares.father.withoutChildren === 'remainder' ? remainingShare : this.shares.father.withoutChildren);
                    shares.father = { amount: estate * share, fraction: share };
                    remainingShare -= share;
                }

                if (heirs.hasMother) {
                    const share = hasChildren ? this.shares.mother.withChildren : this.shares.mother.withoutChildren;
                    shares.mother = { amount: estate * share, fraction: share };
                    remainingShare -= share;
                }

                // حساب نصيب الأبناء
                if (hasChildren) {
                    let remainingAmount = estate * remainingShare;
                    let totalShares = (heirs.numSons * 2) + heirs.numDaughters;
                    let sharePerUnit = remainingAmount / totalShares;

                    if (heirs.numSons > 0) {
                        const sonShare = (sharePerUnit * 2 * heirs.numSons) / estate;
                        shares.sons = { 
                            amount: sharePerUnit * 2 * heirs.numSons,
                            fraction: sonShare,
                            perPerson: sharePerUnit * 2
                        };
                    }
                    if (heirs.numDaughters > 0) {
                        const daughterShare = (sharePerUnit * heirs.numDaughters) / estate;
                        shares.daughters = { 
                            amount: sharePerUnit * heirs.numDaughters,
                            fraction: daughterShare,
                            perPerson: sharePerUnit
                        };
                    }
                }

                return shares;
            }

            calculateInheritance() {
                try {
                    const estate = Number(document.getElementById('totalEstate').value) || 0;
                    const debts = Number(document.getElementById('debts').value) || 0;
                    const netEstate = estate - debts;

                    const heirs = {
                        spouse: document.querySelector('input[name="spouse"]:checked')?.value || 'none',
                        hasFather: document.getElementById('hasFather')?.checked || false,
                        hasMother: document.getElementById('hasMother')?.checked || false,
                        numSons: Number(document.getElementById('numSons')?.value) || 0,
                        numDaughters: Number(document.getElementById('numDaughters')?.value) || 0
                    };

                    const shares = this.calculateShares(netEstate, heirs);
                    this.displayResults(netEstate, heirs, shares);
                } catch (error) {
                    console.error('Error calculating inheritance:', error);
                    alert('حدث خطأ أثناء حساب المواريث');
                }
            }

            displayResults(netEstate, heirs, shares) {
                const resultCard = document.getElementById('resultCard');
                resultCard.style.display = 'block';

                // Display estate details
                document.getElementById('estateDetails').innerHTML = `إجمالي التركة: ${formatCurrency(netEstate)}`;
                document.getElementById('debtsDetails').innerHTML = `الديون والوصايا: ${formatCurrency(Number(document.getElementById('debts').value) || 0)}`;
                document.getElementById('netEstateDetails').innerHTML = `صافي التركة: ${formatCurrency(netEstate)}`;

                // Display heirs details with shares
                let heirsHTML = '';
                if (heirs.spouse !== 'none' && shares[heirs.spouse]) {
                    heirsHTML += `<div class="mb-2">الزوج/الزوجة: ${heirs.spouse === 'husband' ? 'زوج' : 'زوجة'} - ${formatCurrency(shares[heirs.spouse].amount)}</div>`;
                }
                if (heirs.hasFather && shares.father) {
                    heirsHTML += `<div class="mb-2">الأب: موجود - ${formatCurrency(shares.father.amount)}</div>`;
                }
                if (heirs.hasMother && shares.mother) {
                    heirsHTML += `<div class="mb-2">الأم: موجودة - ${formatCurrency(shares.mother.amount)}</div>`;
                }
                if (heirs.numSons > 0 && shares.sons) {
                    heirsHTML += `<div class="mb-2">الأبناء: ${heirs.numSons} - ${formatCurrency(shares.sons.amount)} (${formatCurrency(shares.sons.perPerson)} لكل ابن)</div>`;
                }
                if (heirs.numDaughters > 0 && shares.daughters) {
                    heirsHTML += `<div class="mb-2">البنات: ${heirs.numDaughters} - ${formatCurrency(shares.daughters.amount)} (${formatCurrency(shares.daughters.perPerson)} لكل بنت)</div>`;
                }
                document.getElementById('heirsDetails').innerHTML = heirsHTML;

                // Display inheritance tree with shares
                let treeHTML = '';
                if (heirs.spouse !== 'none' && shares[heirs.spouse]) {
                    const spouseShare = this.formatFraction(shares[heirs.spouse].fraction);
                    treeHTML += `<div class="tree-node">
                        <i class="bi bi-person-heart"></i>
                        ${heirs.spouse === 'husband' ? 'الزوج' : 'الزوجة'}
                        <span class="tree-node-share">${spouseShare}</span>
                    </div>`;
                }
                if (heirs.hasFather && shares.father) {
                    const fatherShare = this.formatFraction(shares.father.fraction);
                    treeHTML += `<div class="tree-node">
                        <i class="bi bi-person"></i>
                        الأب
                        <span class="tree-node-share">${fatherShare}</span>
                    </div>`;
                }
                if (heirs.hasMother && shares.mother) {
                    const motherShare = this.formatFraction(shares.mother.fraction);
                    treeHTML += `<div class="tree-node">
                        <i class="bi bi-person"></i>
                        الأم
                        <span class="tree-node-share">${motherShare}</span>
                    </div>`;
                }
                if (heirs.numSons > 0 && shares.sons) {
                    const sonsShare = this.formatFraction(shares.sons.fraction);
                    treeHTML += `<div class="tree-node">
                        <i class="bi bi-people"></i>
                        الأبناء (${heirs.numSons})
                        <span class="tree-node-share">${sonsShare}</span>
                    </div>`;
                }
                if (heirs.numDaughters > 0 && shares.daughters) {
                    const daughtersShare = this.formatFraction(shares.daughters.fraction);
                    treeHTML += `<div class="tree-node">
                        <i class="bi bi-people"></i>
                        البنات (${heirs.numDaughters})
                        <span class="tree-node-share">${daughtersShare}</span>
                    </div>`;
                }
                document.getElementById('inheritanceTree').innerHTML = treeHTML || '<div class="text-center text-muted">لا يوجد ورثة</div>';

                // Scroll to results
                resultCard.scrollIntoView({ behavior: 'smooth' });
            }

            formatFraction(fraction) {
                if (typeof fraction !== 'number') return '-';
                const percentage = (fraction * 100).toFixed(1);
                return `${percentage}%`;
            }
        }

        // Initialize calculator when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new InheritanceCalculator();
        });
    </script>
</body>
</html>
